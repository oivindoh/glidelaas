drop table healthstatus;
create table if not exists healthstatus(FOREIGN KEY("systemid") REFERENCES system("systemid"),"when" datetime not null, "system" text not null, "status" integer not null, "who" text, "meta" text);
create unique index if not exists uniqueHealthStatus on healthstatus ("systemid","when");
insert into healthstatus values(1,"2015-10-24 20:30:12", "ElcomNorway", 10, "abat","failure");
insert into healthstatus values(1,"2015-10-24 20:40:15", "ElcomNorway", 20, "abat","");
insert into healthstatus values(1,"2015-10-24 20:50:13", "ElcomNorway", 20, "abat","");
insert into healthstatus values(1,"2015-10-24 21:00:18", "ElcomNorway", 30, "abat","");
insert into healthstatus values(1,"2015-10-24 21:10:17", "ElcomNorway", 50, "abat","");
  insert into healthstatus values(1,"2015-10-24 21:30:17", "ElcomNorway", 70, "abat","");
    insert into healthstatus values(1,"2015-10-24 22:10:17", "ElcomNorway", 80, "abat","");
      insert into healthstatus values(1,"2015-10-24 23:10:17", "ElcomNorway", 81, "abat","");
        insert into healthstatus values(1,"2015-10-25 00:10:17", "ElcomNorway", 82, "abat","");
          insert into healthstatus values(1,"2015-10-25 01:10:17", "ElcomNorway", 83, "abat","");
            insert into healthstatus values(1,"2015-10-25 02:10:17", "ElcomNorway", 81, "abat","");
              insert into healthstatus values(1,"2015-10-25 03:10:17", "ElcomNorway", 70, "abat","");
                insert into healthstatus values(1,"2015-10-25 04:10:17", "ElcomNorway", 80, "abat","");
                  insert into healthstatus values(1,"2015-10-25 04:30:17", "ElcomNorway", 75, "abat","");
                    insert into healthstatus values(1,"2015-10-25 05:10:17", "ElcomNorway", 50, "abat","");
                      insert into healthstatus values(1,"2015-10-25 05:20:17", "ElcomNorway", 50, "abat","");
insert into healthstatus values(2,"2015-10-24 20:31:12", "ElcomSweden", 50, "abat","");
insert into healthstatus values(2,"2015-10-24 20:41:15", "ElcomSweden", 50, "abat","");
insert into healthstatus values(2,"2015-10-24 20:51:13", "ElcomSweden", 30, "abat","");
insert into healthstatus values(2,"2015-10-24 21:01:18", "ElcomSweden", 20, "abat","");
insert into healthstatus values(2,"2015-10-24 21:11:17", "ElcomSweden", 10, "abat","failure");
  insert into healthstatus values(2,"2015-10-24 21:21:17", "ElcomSweden", 90, "abat","");
    insert into healthstatus values(2,"2015-10-24 21:31:17", "ElcomSweden", 90, "abat","");
      insert into healthstatus values(2,"2015-10-24 21:41:17", "ElcomSweden", 90, "abat","");
        insert into healthstatus values(2,"2015-10-24 21:51:17", "ElcomSweden", 90, "abat","");
          insert into healthstatus values(2,"2015-10-24 22:01:17", "ElcomSweden", 30, "abat","");
            insert into healthstatus values(2,"2015-10-24 22:11:17", "ElcomSweden", 70, "abat","");
              insert into healthstatus values(2,"2015-10-24 22:21:17", "ElcomSweden", 30, "abat","");
                insert into healthstatus values(2,"2015-10-24 22:31:17", "ElcomSweden", 80, "abat","");
                  insert into healthstatus values(2,"2015-10-24 22:41:17", "ElcomSweden", 90, "abat","");
                    insert into healthstatus values(2,"2015-10-24 22:51:17", "ElcomSweden", 92, "abat","");
                      insert into healthstatus values(2,"2015-10-24 23:01:17", "ElcomSweden", 87, "abat","");
                        insert into healthstatus values(2,"2015-10-24 23:11:17", "ElcomSweden", 65, "abat","");
insert into healthstatus values(3,"2015-10-24 20:30:12", "SecretSystem", 10, "abat","failure");
insert into healthstatus values(3,"2015-10-24 20:40:15", "SecretSystem", 20, "abat","");
insert into healthstatus values(3,"2015-10-24 20:50:13", "SecretSystem", 20, "abat","");
insert into healthstatus values(3,"2015-10-24 21:00:18", "SecretSystem", 30, "abat","");
insert into healthstatus values(3,"2015-10-24 21:10:17", "SecretSystem", 50, "abat","");
  insert into healthstatus values(3,"2015-10-24 21:15:17", "SecretSystem", 70, "abat","");
    insert into healthstatus values(3,"2015-10-24 22:10:17", "SecretSystem", 80, "abat","");
      insert into healthstatus values(3,"2015-10-24 23:10:17", "SecretSystem", 81, "abat","");
        insert into healthstatus values(3,"2015-10-25 00:10:17", "SecretSystem", 82, "abat","");
          insert into healthstatus values(3,"2015-10-25 01:10:17", "SecretSystem", 83, "abat","");
            insert into healthstatus values(3,"2015-10-25 02:10:17", "SecretSystem", 81, "abat","");
              insert into healthstatus values(3,"2015-10-25 03:10:17", "SecretSystem", 70, "abat","");
                insert into healthstatus values(3,"2015-10-25 04:10:17", "SecretSystem", 80, "abat","");
                  insert into healthstatus values(3,"2015-10-25 04:30:17", "SecretSystem", 75, "abat","");
                    insert into healthstatus values(3,"2015-10-25 05:10:17", "SecretSystem", 50, "abat","");
                      insert into healthstatus values(3,"2015-10-25 05:20:17", "SecretSystem", 50, "abat","");

-- just to test unique constraint works...
--insert into healthstatus values("2015-10-24 21:10:17", "EN", 50, "abat");

create table if not exists system("systemid" integer primary key autoincrement, "systemname" text not null, "threshold" integer not null, "description" text);
insert into system values(NULL,"ElcomNorway",60,"Elcom NO");
insert into system values(NULL,"ElcomSweden",70,"Elcom SE");
insert into system values(NULL,"SecretSystem",50,"Secret System");
