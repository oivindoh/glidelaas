drop table if exists system;
drop table if exists collectionsystem;
create table if not exists collectionsystem("systemid" integer primary key autoincrement, "systemname" text not null, "threshold" integer not null, "description" text);
insert into collectionsystem values(NULL,"ElcomNorway",60,"Elcom NO");
insert into collectionsystem values(NULL,"ElcomSweden",70,"Elcom SE");
insert into collectionsystem values(NULL,"SecretSystem",50,"Secret System");

drop table if exists healthstatus;
create table if not exists healthstatus("systemid" integer not null, "when" datetime not null, "status" integer not null, "who" text, "meta" text, FOREIGN KEY("systemid") REFERENCES collectionsystem("systemid"));
create unique index if not exists uniqueHealthStatus on healthstatus ("systemid","when");
  insert into healthstatus values(1,"2015-10-24 20:30:12", 10, "abat","failure");
  insert into healthstatus values(1,"2015-10-24 20:40:15", 20, "abat","");
  insert into healthstatus values(1,"2015-10-24 20:50:13", 20, "abat","");
  insert into healthstatus values(1,"2015-10-24 21:00:18", 30, "abat","");
  insert into healthstatus values(1,"2015-10-24 21:10:17", 50, "abat","");
    insert into healthstatus values(1,"2015-10-24 21:30:17", 70, "abat","");
      insert into healthstatus values(1,"2015-10-24 22:10:17", 80, "abat","");
        insert into healthstatus values(1,"2015-10-24 23:10:17", 81, "abat","");
          insert into healthstatus values(1,"2015-10-25 00:10:17", 82, "abat","");
            insert into healthstatus values(1,"2015-10-25 01:10:17", 83, "abat","");
              insert into healthstatus values(1,"2015-10-25 02:10:17", 81, "abat","");
                insert into healthstatus values(1,"2015-10-25 03:10:17", 70, "abat","");
                  insert into healthstatus values(1,"2015-10-25 04:10:17", 80, "abat","");
                    insert into healthstatus values(1,"2015-10-25 04:30:17", 75, "abat","");
                      insert into healthstatus values(1,"2015-10-25 05:10:17", 50, "abat","");
                        insert into healthstatus values(1,"2015-10-25 05:20:17", 50, "abat","");
                          insert into healthstatus values(1,"2015-10-26 05:20:17", 50, "abat","");
                            insert into healthstatus values(1,"2015-10-26 06:20:17", 50, "abat","");
                              insert into healthstatus values(1,"2015-10-26 07:20:17", 50, "abat","");
                                insert into healthstatus values(1,"2015-10-26 08:20:17", 50, "abat","");
                                  insert into healthstatus values(1,"2015-10-27 05:20:17", 50, "abat","");
                                    insert into healthstatus values(1,"2015-10-27 06:20:17", 50, "abat","");
                                      insert into healthstatus values(1,"2015-10-27 07:20:17", 50, "abat","");
                                        insert into healthstatus values(1,"2015-10-27 08:20:17", 50, "abat","");
  insert into healthstatus values(2,"2015-10-24 20:31:12", 50, "abat","");
  insert into healthstatus values(2,"2015-10-24 20:41:15", 50, "abat","");
  insert into healthstatus values(2,"2015-10-24 20:51:13", 30, "abat","");
  insert into healthstatus values(2,"2015-10-24 21:01:18", 20, "abat","");
  insert into healthstatus values(2,"2015-10-24 21:11:17", 10, "abat","failure");
    insert into healthstatus values(2,"2015-10-24 21:21:17", 90, "abat","");
      insert into healthstatus values(2,"2015-10-24 21:31:17", 90, "abat","");
        insert into healthstatus values(2,"2015-10-24 21:41:17", 90, "abat","");
          insert into healthstatus values(2,"2015-10-24 21:51:17", 90, "abat","");
            insert into healthstatus values(2,"2015-10-24 22:01:17", 30, "abat","");
              insert into healthstatus values(2,"2015-10-24 22:11:17", 70, "abat","");
                insert into healthstatus values(2,"2015-10-24 22:21:17", 30, "abat","");
                  insert into healthstatus values(2,"2015-10-24 22:31:17", 80, "abat","");
                    insert into healthstatus values(2,"2015-10-24 22:41:17", 90, "abat","");
                      insert into healthstatus values(2,"2015-10-24 22:51:17", 92, "abat","");
                        insert into healthstatus values(2,"2015-10-24 23:01:17", 87, "abat","");
                          insert into healthstatus values(2,"2015-10-24 23:11:17", 65, "abat","");
                            insert into healthstatus values(2,"2015-10-26 11:21:17", 30, "abat","");
                              insert into healthstatus values(2,"2015-10-26 12:31:17", 80, "abat","");
                                insert into healthstatus values(2,"2015-10-26 12:41:17", 90, "abat","");
                                  insert into healthstatus values(2,"2015-10-26 12:51:17", 92, "abat","");
                                    insert into healthstatus values(2,"2015-10-26 13:01:17", 87, "abat","");
                                      insert into healthstatus values(2,"2015-10-26 13:11:17", 65, "abat","");
  insert into healthstatus values(3,"2015-10-24 20:30:12", 10, "abat","failure");
  insert into healthstatus values(3,"2015-10-24 20:40:15", 20, "abat","");
  insert into healthstatus values(3,"2015-10-24 20:50:13", 20, "abat","");
  insert into healthstatus values(3,"2015-10-24 21:00:18", 30, "abat","");
  insert into healthstatus values(3,"2015-10-24 21:10:17", 50, "abat","");
    insert into healthstatus values(3,"2015-10-24 21:15:17", 70, "abat","");
      insert into healthstatus values(3,"2015-10-24 22:10:17", 80, "abat","");
        insert into healthstatus values(3,"2015-10-24 23:10:17", 81, "abat","");
          insert into healthstatus values(3,"2015-10-25 00:10:17", 82, "abat","");
            insert into healthstatus values(3,"2015-10-25 01:10:17", 83, "abat","");
              insert into healthstatus values(3,"2015-10-25 02:10:17", 81, "abat","");
                insert into healthstatus values(3,"2015-10-25 03:10:17", 70, "abat","");
                  insert into healthstatus values(3,"2015-10-25 04:10:17", 80, "abat","");
                    insert into healthstatus values(3,"2015-10-25 04:30:17", 75, "abat","");
                      insert into healthstatus values(3,"2015-10-25 05:10:17", 50, "abat","");
                        insert into healthstatus values(3,"2015-10-25 05:20:17", 50, "abat","");
                          insert into healthstatus values(3,"2015-10-26 03:10:17", 70, "abat","");
                            insert into healthstatus values(3,"2015-10-26 04:10:17", 80, "abat","");
                              insert into healthstatus values(3,"2015-10-26 04:30:17", 75, "abat","");
                                insert into healthstatus values(3,"2015-10-27 05:10:17", 50, "abat","");
                                  insert into healthstatus values(3,"2015-10-27 05:20:17", 50, "abat","");

  -- just to test unique constraint works...
  --insert into healthstatus values("2015-10-24 21:10:17", "EN", 50, "abat");
